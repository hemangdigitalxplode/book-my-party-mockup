(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4061],{80107:function(e,l,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/venues/[slug]",function(){return i(51304)}])},51304:function(e,l,i){"use strict";i.r(l);var n=i(85893),t=i(67294),s=i(16310),a=i(94034),o=i(58971),d=i.n(o),u=i(60174),v=i(16430),r=i(53376),c=i(25675),p=i.n(c),m=i(74936),g=i(11163),h=i(45007),y=i(75763),x=i(99504),b=i(96303);l.default=()=>{var e,l,i,o,c,j,k,f,I;const C=(0,g.useRouter)(),N=(0,h.I0)(),{venueState:_}=(0,h.v9)((e=>e.venueDetails)),{amenities:q,cuisines:S,franchiseChain:O,locations:w,occasions:P,venueTypes:D,activities:B,ageGroups:M,venueMenuItems:T,propertyRules:V,loggedInUser:G}=(0,h.v9)((e=>e.session)),[R,E]=(0,t.useState)({}),[U,F]=(0,t.useState)(d().get("steps")||{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1}),[L,A]=(0,t.useState)(!0);(0,t.useEffect)((()=>{d().set("steps",U)}),[U]);const z=(0,a.TA)({initialValues:{title:(null===_||void 0===_?void 0:_.title)||"",description:(null===_||void 0===_?void 0:_.description)||"",highlights:(null===_||void 0===_?void 0:_.highlights)||""},enableReinitialize:!0,validationSchema:s.Ry().shape({title:s.Z_().label("Title").required("Title is required").min(8,"Title must be at least 8 characters")}),onSubmit:async e=>{var l;N((0,y.k)({..._,title:e.title,description:e.description,highlights:e.highlights})),F((e=>({...e,step1:!0}))),C.push({pathname:"/dashboard/venues/".concat(null===C||void 0===C||null===(l=C.query)||void 0===l?void 0:l.slug),query:"step=1"})}});(0,t.useEffect)((()=>{A(!0),async function(){const e=await u.M.authorsList(),l=null===e||void 0===e?void 0:e.map((e=>parseInt(e.id))),i=null===G||void 0===G?void 0:G.databaseId,n=[...l];void 0!==i&&null!==i&&n.push(i),N((0,b.kR)(n))}(),N((0,b.QM)()),N((0,b.xW)()),N((0,b.qn)()),N((0,b.vB)()),N((0,b.I6)()),N((0,b.Dq)()),N((0,b.z6)()),N((0,b.U7)()),N((0,b.D8)()),u.M.getVenueDetails(C.query.slug,"DATABASE_ID").then((e=>{if(null===e||void 0===e?void 0:e.title){var l,i,n,t,s,a,o,d,u,v,r,c,p,m,g,h,x,b,j,k,f,I,C,_,q,S,O,w,P,D,B,M,T,V,G,R,U,F,L,H,Q,W,X,Y,Z,J,K,$,ee,le,ie,ne,te,se,ae,oe,de,ue,ve,re,ce,pe,me;const ge=null===e||void 0===e||null===(n=e.extraOptions)||void 0===n||null===(i=n.holidays)||void 0===i||null===(l=i.split(","))||void 0===l?void 0:l.map((e=>e.trim()));N((0,y.k)({id:null===e||void 0===e?void 0:e.id,start_date:(null===ge||void 0===ge?void 0:ge.length)>0?ge[0]:null,end_date:(null===ge||void 0===ge?void 0:ge.length)>0?ge[ge.length-1]:null,holidays:ge,title:0===(null===z||void 0===z||null===(s=z.values)||void 0===s||null===(t=s.title)||void 0===t?void 0:t.length)?null===e||void 0===e?void 0:e.title:null===z||void 0===z||null===(a=z.values)||void 0===a?void 0:a.title,description:0===(null===z||void 0===z||null===(d=z.values)||void 0===d||null===(o=d.description)||void 0===o?void 0:o.length)?null===e||void 0===e?void 0:e.content:null===z||void 0===z||null===(u=z.values)||void 0===u?void 0:u.description,highlights:0===(null===z||void 0===z||null===(r=z.values)||void 0===r||null===(v=r.highlights)||void 0===v?void 0:v.length)?null===e||void 0===e||null===(c=e.extraOptions)||void 0===c?void 0:c.highlights:null===z||void 0===z||null===(p=z.values)||void 0===p?void 0:p.highlights,location:null===e||void 0===e||null===(g=e.locations.nodes)||void 0===g||null===(m=g.filter((e=>"india"!==e.slug))[0])||void 0===m?void 0:m.slug,activities:null===e||void 0===e||null===(x=e.activities)||void 0===x||null===(h=x.nodes)||void 0===h?void 0:h.map((e=>e.slug)),ageGroups:null===e||void 0===e||null===(j=e.ageGroups)||void 0===j||null===(b=j.nodes)||void 0===b?void 0:b.map((e=>e.slug)),occasions:null===e||void 0===e||null===(f=e.occasions)||void 0===f||null===(k=f.nodes)||void 0===k?void 0:k.map((e=>e.slug)),allCuisine:null===e||void 0===e||null===(C=e.allCuisine)||void 0===C||null===(I=C.nodes)||void 0===I?void 0:I.map((e=>e.slug)),amenities:null===e||void 0===e||null===(q=e.amenities)||void 0===q||null===(_=q.nodes)||void 0===_?void 0:_.map((e=>e.slug)),franchises:null===e||void 0===e||null===(O=e.franchises)||void 0===O||null===(S=O.nodes)||void 0===S?void 0:S.map((e=>e.slug)),venueTypes:null===e||void 0===e||null===(P=e.venueTypes)||void 0===P||null===(w=P.nodes)||void 0===w?void 0:w.map((e=>e.slug)),capacity:"".concat(null===e||void 0===e||null===(D=e.extraOptions)||void 0===D?void 0:D.capacity),propertyRules:null===e||void 0===e||null===(T=e.extraOptions)||void 0===T||null===(M=T.propertyRules)||void 0===M||null===(B=M.nodes)||void 0===B?void 0:B.map((e=>e.databaseId)),type:null===e||void 0===e||null===(G=e.venueCategories)||void 0===G||null===(V=G.nodes[0])||void 0===V?void 0:V.slug,videoUrl:null===e||void 0===e||null===(U=e.extraOptions)||void 0===U||null===(R=U.mediaGallery)||void 0===R?void 0:R.videoUrl,paxPrice:null===e||void 0===e||null===(F=e.extraOptions)||void 0===F?void 0:F.paxPrice,featureImage:null===e||void 0===e||null===(H=e.featuredImage)||void 0===H||null===(L=H.node)||void 0===L?void 0:L.mediaItemUrl,featureImageDataBaseId:null===e||void 0===e||null===(W=e.featuredImage)||void 0===W||null===(Q=W.node)||void 0===Q?void 0:Q.databaseId,galleryImages:{images_url:(null===e||void 0===e||null===(Z=e.extraOptions)||void 0===Z||null===(Y=Z.mediaGallery)||void 0===Y||null===(X=Y.imageGallery)||void 0===X?void 0:X.map((e=>{var l,i;return null===e||void 0===e||null===(i=e.items)||void 0===i||null===(l=i.node)||void 0===l?void 0:l.mediaItemUrl})))||[],images:(null===e||void 0===e||null===(K=e.extraOptions)||void 0===K||null===(J=K.mediaGallery)||void 0===J?void 0:J.imageGallery)||[],imagesDataBaseId:(null===e||void 0===e||null===(le=e.extraOptions)||void 0===le||null===(ee=le.mediaGallery)||void 0===ee||null===($=ee.imageGallery)||void 0===$?void 0:$.map((e=>{var l,i;return{items:null===e||void 0===e||null===(i=e.items)||void 0===i||null===(l=i.node)||void 0===l?void 0:l.databaseId}})))||[]},alaCarteMenu:null===e||void 0===e||null===(ne=e.extraOptions)||void 0===ne||null===(ie=ne.alaCarteMenu)||void 0===ie?void 0:ie.map((e=>{var l,i;return{title:e.title,images:e.gallery||[],images_url:(null===e||void 0===e||null===(l=e.gallery)||void 0===l?void 0:l.map((e=>{var l,i;return(null===e||void 0===e||null===(i=e.image)||void 0===i||null===(l=i.node)||void 0===l?void 0:l.mediaItemUrl)||""})))||[],imagesDataBaseId:(null===e||void 0===e||null===(i=e.gallery)||void 0===i?void 0:i.map((e=>{var l,i;return{image:(null===e||void 0===e||null===(i=e.image)||void 0===i||null===(l=i.node)||void 0===l?void 0:l.databaseId)||""}})))||[]}})),menuItems:null===e||void 0===e||null===(se=e.extraOptions)||void 0===se||null===(te=se.menuItems)||void 0===te?void 0:te.map((e=>{var l,i,n,t,s,a;return{item_category:null===e||void 0===e||null===(i=e.itemCategory)||void 0===i||null===(l=i.nodes[0])||void 0===l?void 0:l.databaseId,item_subcategory:null===e||void 0===e||null===(t=e.itemSubCategory)||void 0===t||null===(n=t.nodes[0])||void 0===n?void 0:n.databaseId,items:null===e||void 0===e||null===(a=e.items)||void 0===a||null===(s=a.nodes)||void 0===s?void 0:s.map((e=>e.databaseId))}})),address:{...null===e||void 0===e||null===(ae=e.extraOptions)||void 0===ae?void 0:ae.address,google_map:null===e||void 0===e||null===(oe=e.extraOptions)||void 0===oe?void 0:oe.address.googleMap,sub_location:null===e||void 0===e||null===(ue=e.extraOptions)||void 0===ue||null===(de=ue.address)||void 0===de?void 0:de.subLocation},package_starting_from:null===e||void 0===e||null===(re=e.extraOptions)||void 0===re||null===(ve=re.packageStartingFrom)||void 0===ve?void 0:ve.map((e=>({package_starting_type:null===e||void 0===e?void 0:e.packageStartingType,package_starting_title:null===e||void 0===e?void 0:e.packageStartingTitle,package_starting_price:null===e||void 0===e?void 0:e.packageStartingPrice}))),googleReviewsId:(null===e||void 0===e||null===(ce=e.extraOptions)||void 0===ce?void 0:ce.googleReviewsId)||"",packages:null===e||void 0===e||null===(me=e.extraOptions)||void 0===me||null===(pe=me.packages)||void 0===pe?void 0:pe.map((e=>{var l,i,n,t,s,a,o;const d={};for(const u in e.packageSettings)if(e.packageSettings.hasOwnProperty(u)){const l=e.packageSettings[u],i={};for(const e in l)if(l.hasOwnProperty(e)){i["menuitem_"+e.replace("menuitem","")]=l[e]}d["menuitem_"+u.replace("menuitem","")]=i}return{title:e.title,price:e.price,image:e.image,content:e.content,image_url:null===e||void 0===e||null===(i=e.image)||void 0===i||null===(l=i.node)||void 0===l?void 0:l.mediaItemUrl,imageDataBaseId:null===e||void 0===e||null===(t=e.image)||void 0===t||null===(n=t.node)||void 0===n?void 0:n.databaseId,package_settings:d,package_settings1:null===e||void 0===e||null===(s=e.packageSettings1)||void 0===s?void 0:s.map((e=>{var l,i,n,t;return{items:null===e||void 0===e?void 0:e.items,item_category:null===e||void 0===e||null===(i=e.category)||void 0===i||null===(l=i.nodes[0])||void 0===l?void 0:l.databaseId,item_subcategory:null===e||void 0===e||null===(t=e.subCategory)||void 0===t||null===(n=t.nodes[0])||void 0===n?void 0:n.databaseId}})),dietaryPreference:e.dietaryPreference,freeCancellation:e.freeCancellation,menuDetail:e.menuDetail,salePrice:e.salePrice,shortDescription:e.shortDescription,validOn:(null===e||void 0===e||null===(a=e.validOn)||void 0===a?void 0:a.length)>0?e.validOn[0]:"",timing:(null===e||void 0===e||null===(o=e.timing)||void 0===o?void 0:o.length)>0?null===e||void 0===e?void 0:e.timing[0]:"",minPax:e.minPax}}))})),E(e),A(!1)}}))}),[]);const H=e=>{var l,i;0===e?C.push("/dashboard/venues/".concat(null===C||void 0===C||null===(l=C.query)||void 0===l?void 0:l.slug)):C.push({pathname:"/dashboard/venues/".concat(null===C||void 0===C||null===(i=C.query)||void 0===i?void 0:i.slug),query:"step=".concat(e)})};return(0,n.jsxs)(v.cl,{children:[(0,n.jsx)(v.RF,{seo:R.seo||""}),(0,n.jsxs)("div",{className:"create-venue",children:[(0,n.jsx)("h3",{className:"mb-0",children:"Edit Venue"}),(0,n.jsxs)("ul",{className:"nav nav-pills",id:"pills-tab",role:"tablist",children:[(0,n.jsx)("li",{className:"nav-item",role:"presentation",children:(0,n.jsxs)("button",{onClick:()=>H(0),className:"nav-link ".concat(U.step1&&"success"," ").concat(!(null===C||void 0===C||null===(e=C.query)||void 0===e?void 0:e.step)&&"active"),type:"button",disabled:!U.step1,children:["Basic Info",(0,n.jsx)(p(),{src:m.Vn,width:"16",height:"16",alt:"CheckBadge"})]})}),(0,n.jsx)("li",{className:"nav-item",role:"presentation",children:(0,n.jsxs)("button",{onClick:()=>H(1),className:"nav-link ".concat(U.step2&&"success"," ").concat("1"==(null===C||void 0===C||null===(l=C.query)||void 0===l?void 0:l.step)&&"active"),type:"button",disabled:!U.step2,children:["Facilities",(0,n.jsx)(p(),{src:m.Vn,width:"16",height:"16",alt:"CheckBadge"})]})}),(0,n.jsx)("li",{className:"nav-item",role:"presentation",children:(0,n.jsxs)("button",{onClick:()=>H(2),className:"nav-link ".concat(U.step3&&"success"," ").concat("2"==(null===C||void 0===C||null===(i=C.query)||void 0===i?void 0:i.step)&&"active"),type:"button",disabled:!U.step3,children:["Gallery",(0,n.jsx)(p(),{src:m.Vn,width:"16",height:"16",alt:"CheckBadge"})]})}),(0,n.jsx)("li",{className:"nav-item",role:"presentation",children:(0,n.jsxs)("button",{onClick:()=>H(3),className:"nav-link ".concat(U.step4&&"success"," ").concat("3"==(null===C||void 0===C||null===(o=C.query)||void 0===o?void 0:o.step)&&"active"),type:"button",disabled:!U.step4,children:["A La Carte Menu",(0,n.jsx)(p(),{src:m.Vn,width:"16",height:"16",alt:"CheckBadge"})]})}),("banquet"===(null===_||void 0===_?void 0:_.type)||"farm-house"===_.type)&&(0,n.jsx)("li",{className:"nav-item",role:"presentation",children:(0,n.jsxs)("button",{onClick:()=>H(4),className:"nav-link ".concat(U.step5&&"success"," ").concat("4"==(null===C||void 0===C||null===(c=C.query)||void 0===c?void 0:c.step)&&"active"),type:"button",disabled:!U.step5,children:["Menu items",(0,n.jsx)(p(),{src:m.Vn,width:"16",height:"16",alt:"CheckBadge"})]})}),(0,n.jsx)("li",{className:"nav-item",role:"presentation",children:(0,n.jsxs)("button",{onClick:()=>H(5),className:"nav-link ".concat(U.step6&&"success"," ").concat("5"==(null===C||void 0===C||null===(j=C.query)||void 0===j?void 0:j.step)&&"active"),type:"button",disabled:!U.step6,children:["Locations",(0,n.jsx)(p(),{src:m.Vn,width:"16",height:"16",alt:"CheckBadge"})]})}),(0,n.jsx)("li",{className:"nav-item",role:"presentation",children:(0,n.jsxs)("button",{onClick:()=>H(6),className:"nav-link ".concat(U.step7&&"success"," ").concat("6"==(null===C||void 0===C||null===(k=C.query)||void 0===k?void 0:k.step)&&"active"),type:"button",disabled:!U.step6,children:["Party Packages",(0,n.jsx)(p(),{src:m.Vn,width:"16",height:"16",alt:"CheckBadge"})]})}),(0,n.jsx)("li",{className:"nav-item",role:"presentation",children:(0,n.jsxs)("button",{onClick:()=>H(7),className:"nav-link ".concat(U.step8&&"success"," ").concat("7"==(null===C||void 0===C||null===(f=C.query)||void 0===f?void 0:f.step)&&"active"),type:"button",disabled:!U.step8,children:["Holidays",(0,n.jsx)(p(),{src:m.Vn,width:"16",height:"16",alt:"CheckBadge"})]})})]}),L?(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsx)(v.gb,{})}):(0,n.jsxs)("div",{className:"tab-content",id:"pills-tabContent",children:[!(null===C||void 0===C||null===(I=C.query)||void 0===I?void 0:I.step)&&(0,n.jsxs)("form",{onSubmit:z.handleSubmit,className:"tab-pane fade show active",children:[(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)("div",{className:"card-body information",children:[(0,n.jsx)("div",{className:"mb-30",children:(0,n.jsx)(r.UP,{className:"mb-30",label:"Title",name:"title",required:!0,value:z.values.title,onChange:z.handleChange,onBlur:z.handleBlur,error:z.touched.title&&z.errors.title})}),(0,n.jsxs)("div",{className:"mb-30",children:[(0,n.jsx)("label",{className:"form-label",children:"Short Intro"}),!L&&(0,n.jsx)(x.vM,{initData:z.values.description,onChange:e=>{const l=e.editor.getData(),i=(new DOMParser).parseFromString(l,"text/html").body.innerHTML;z.setFieldValue("description",i)},config:{allowedContent:!0,fullPage:!0}})]}),(0,n.jsxs)("div",{className:"mb-30",children:[(0,n.jsx)("label",{className:"form-label",children:"Highlight"}),!L&&(0,n.jsx)(x.vM,{initData:z.values.highlights,onChange:e=>{const l=e.editor.getData(),i=(new DOMParser).parseFromString(l,"text/html").body.innerHTML;z.setFieldValue("highlights",i)},config:{allowedContent:!0,fullPage:!0}})]}),(0,n.jsx)("hr",{})]})}),(0,n.jsx)("div",{className:"d-flex justify-content-center continue-btn",children:(0,n.jsx)(r.zx,{type:"submit",label:"Continue",className:"btn btn-primary"})})]}),"1"===C.query.step&&(0,n.jsx)(v._r,{props:{amenities:q,cuisines:S,franchiseChain:O,locations:w,occasions:P,venueTypes:D,activities:B,ageGroups:M,propertyRules:V,setSteps:F}}),"2"===C.query.step&&(0,n.jsx)(v.Iz,{props:{setSteps:F}}),"3"===C.query.step&&(0,n.jsx)(v.IR,{props:{setSteps:F}}),"4"===C.query.step&&(0,n.jsx)(v.sN,{venueMenuItems:T,props:{setSteps:F}}),"5"===C.query.step&&(0,n.jsx)(v.Ye,{props:{setSteps:F,locations:w}}),"6"===C.query.step&&(0,n.jsx)(v.PS,{venueMenuItems:T,props:{setSteps:F}}),"7"===C.query.step&&(0,n.jsx)(v.WQ,{})]})]})]})}}},function(e){e.O(0,[4885,2982,3429,9225,2888,9774,179],(function(){return l=80107,e(e.s=l);var l}));var l=e.O();_N_E=l}]);