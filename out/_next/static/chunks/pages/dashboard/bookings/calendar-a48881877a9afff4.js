(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{98666:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/bookings/calendar",function(){return s(60133)}])},60133:function(e,n,s){"use strict";s.r(n);var i=s(85893),d=s(67294),a=s(43907),t=s(91132),l=s(16430),o=s(10177),r=s(45007),c=s(96303),u=s(41664),v=s.n(u),h=s(60174),g=s(11163);n.default=()=>{var e;const n=(0,g.useRouter)(),s=(0,r.I0)(),{loggedInUser:u}=(0,r.v9)((e=>e.session)),[x,b]=(0,d.useState)({}),[p,j]=(0,d.useState)(!1),[f,k]=(0,d.useState)({page:1,per_page:200,user_id:null===u||void 0===u?void 0:u.databaseId}),[m,N]=(0,d.useState)({loading:!1,index:0}),[_,y]=(0,d.useState)({});console.log("dates :>> ",_),(0,d.useEffect)((()=>{j(!0),s((0,c.yM)()),k((e=>({...e,user_id:null===u||void 0===u?void 0:u.databaseId}))),async function(){if(null===u||void 0===u?void 0:u.databaseId){var e,n;const s=await o.s.getAll(6,{...f,user_id:u.databaseId},(null===u||void 0===u||null===(n=u.roles)||void 0===n||null===(e=n.nodes)||void 0===e?void 0:e.some((e=>"author"!=e.name)))?"user":"admin");b(s),j(!1)}}()}),[null===u||void 0===u?void 0:u.databaseId]);return(0,i.jsxs)(l.cl,{children:[(0,i.jsx)(l.RF,{seo:{title:"Booking Calendar - Book My Party"}||""}),(0,i.jsx)("h3",{children:"Booking"}),(0,i.jsx)("div",{children:(0,i.jsxs)("ul",{className:"list-unstyled d-flex gap-3 justify-content-center",children:[(0,i.jsx)("li",{children:(0,i.jsx)(v(),{className:"btn btn-primary",href:"/dashboard/bookings",children:"Bookings"})}),(0,i.jsx)("li",{children:(0,i.jsx)(v(),{className:"btn btn-primary",href:"/dashboard/bookings/Booking",children:"Bookings Calendar"})})]})}),p&&(0,i.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,i.jsx)("div",{className:"spinner-border",role:"status",children:(0,i.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),(0,i.jsx)(a.Z,{plugins:[t.Z],initialView:"dayGridMonth",weekends:!0,events:null===x||void 0===x||null===(e=x.entries)||void 0===e?void 0:e.map((e=>({title:e[113],start:new Date(e[110]),bookingId:e.id,venueId:e[112]}))),eventContent:function(e){return(0,i.jsxs)("ul",{className:"list-unstyled",children:[(0,i.jsxs)("li",{className:"d-flex",children:[(0,i.jsx)("button",{onClick:()=>(async(e,s)=>{N({loading:!0,index:s});const i=await h.M.getVenueSlug(e);(null===i||void 0===i?void 0:i.slug)?(N({loading:!1,index:s}),n.push({pathname:"/venues/".concat(i.slug)})):alert("This venue is no longer available.")})(e.event.extendedProps.venueId,e.event.extendedProps.bookingId),className:"btn btn-link text-wrap",children:e.event.title}),m.loading&&m.index===e.event.extendedProps.bookingId&&(0,i.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,i.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status",children:(0,i.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]}),(0,i.jsxs)("li",{children:["Booking ID : ",(0,i.jsx)(v(),{href:"/dashboard/bookings/".concat(e.event.extendedProps.bookingId),children:e.event.extendedProps.bookingId})]})]})},datesSet:e=>{y(e)}})]})}}},function(e){e.O(0,[4885,2982,1069,3429,6034,9225,2888,9774,179],(function(){return n=98666,e(e.s=n);var n}));var n=e.O();_N_E=n}]);